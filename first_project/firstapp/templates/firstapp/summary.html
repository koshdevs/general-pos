{% extends 'firstapp/base.html' %}

{% block mainContent %}

<link href="https://cdn.webdatarocks.com/latest/webdatarocks.min.css" rel="stylesheet"/>
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.toolbar.min.js"></script>
<script src="https://cdn.webdatarocks.com/latest/webdatarocks.js"></script>

<div id="wdr-component" style="overflow:auto; overflow-x:auto"></div>


<script>
    var pivot = new WebDataRocks({
        container: "#wdr-component",
        toolbar: true,
        height: 395,
        report: {
        dataSource: {
          data: getData()
        },
        "slice": {
            "rows": [
                {
                    "uniqueName": "shop"
                },
                {
                    "uniqueName": "product"
                }
            ],
            "columns": [
                {
                    "uniqueName": "Measures"
                },
                {
                    "uniqueName": "Date.Month"
                }
            ],
            "measures": [
                {
                    "uniqueName": "qty",
                    "aggregation": "sum"
                },
                {
                    "uniqueName": "profit",
                    "aggregation": "sum"
                },
                {
                    "uniqueName": "revenue",
                    "aggregation": "sum"
                },
                {
                    "uniqueName": "expense",
                    "aggregation": "sum"
                },

            ]
        }
      }
    });
    
    function getData() {
      return {{summary | safe}}
    }

</script>

{% endblock mainContent %}